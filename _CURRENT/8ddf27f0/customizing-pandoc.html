<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta name="author" content="Mauro Bieg" />
    <meta name="author" content="John MacFarlane" />
    <title>Customizing Pandoc</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <header id="title-block-header">
      <h1 class="title">Customizing Pandoc</h1>
      <p class="author">Mauro Bieg</p>
      <p class="author">John MacFarlane</p>
    </header>
    <p>
      This document provides a quick overview over the various ways to customize
      pandoc’s output, with links to fuller documentation and some examples.
    </p>
    <h2 id="templates">Templates</h2>
    <p>
      When the <code>-s</code>/<code>--standalone</code> option is used, pandoc
      will generate a standalone document rather than a fragment. For example,
      in HTML output this will include the <code>&lt;head&gt;</code> element; in
      LaTeX output, it will include the preamble.
    </p>
    <p>
      Pandoc comes with a default template for (almost) every output format. A
      template is a plain text file containing variables that are replaced by
      text generated by pandoc. For example, the variable
      <code>$body$</code> will be replaced by the document body, and
      <code>$title$</code> by the title from metadata.
    </p>
    <p>
      To look at the default template for an output format, you can do
      <code>pandoc -D FORMAT</code>, where <code>FORMAT</code> is replaced by
      the name of the format. For example <code>pandoc -D latex</code>. You can
      also use your own template instead, either by using the
      <code>--template</code> option or by putting the custom template in your
      user data directory (on Linux and macOS,
      <code>~/.pandoc/templates/</code>).
    </p>
    <p>
      Note that in many cases you can avoid the need for a custom template by
      including a file with the <code>--include-in-header</code>,
      <code>--include-before-body</code>, or
      <code>--include-after-body</code> option. Or you can set the corresponding
      template variable directly.
    </p>
    <h3 id="template-variables">Template variables</h3>
    <p>There are several ways to set template variables:</p>
    <table>
      <colgroup>
        <col style="width: 19%" />
        <col style="width: 22%" />
        <col style="width: 22%" />
        <col style="width: 34%" />
      </colgroup>
      <thead>
        <tr class="header">
          <th style="text-align: left"></th>
          <th style="text-align: left">
            <a href="https://pandoc.org/MANUAL.html#option--variable"
              ><code>--variable</code></a
            >
          </th>
          <th style="text-align: left">
            <a href="https://pandoc.org/MANUAL.html#option--metadata"
              ><code>--metadata</code></a
            >
          </th>
          <th style="text-align: left">
            <a
              href="https://pandoc.org/MANUAL.html#extension-yaml_metadata_block"
              >YAML metadata</a
            >
            and
            <a href="https://pandoc.org/MANUAL.html#option--metadata-file"
              ><code>--metadata-file</code></a
            >
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="odd">
          <td style="text-align: left">values can be…</td>
          <td style="text-align: left">strings and bools</td>
          <td style="text-align: left">strings and bools</td>
          <td style="text-align: left">also YAML objects and lists</td>
        </tr>
        <tr class="even">
          <td style="text-align: left">strings are…</td>
          <td style="text-align: left">inserted verbatim</td>
          <td style="text-align: left">escaped</td>
          <td style="text-align: left">interpreted as markdown</td>
        </tr>
        <tr class="odd">
          <td style="text-align: left">accessible by filters:</td>
          <td style="text-align: left">no</td>
          <td style="text-align: left">yes</td>
          <td style="text-align: left">yes</td>
        </tr>
      </tbody>
    </table>
    <p>
      For more information, see
      <a href="https://pandoc.org/MANUAL.html#templates">Templates</a> in the
      pandoc manual.
    </p>
    <h3 id="example-adding-structured-author-data-to-html">
      Example: adding structured author data to HTML
    </h3>
    <p>TODO</p>
    <h3 id="example-generating-documents-from-yaml-metadata">
      Example: generating documents from YAML metadata
    </h3>
    <p>
      TODO
      <!-- Example of generating a structured document,
say, a table, from structured YAML metadata using
just the control structures in pandoc's template
language. -->
    </p>
    <h2 id="reference-docxpptxodt">Reference docx/pptx/odt</h2>
    <p>
      For <code>docx</code>, <code>pptx</code> or <code>odt</code> documents,
      things are a bit more complicated. Instead of a single template file, you
      need to provide a customized <code>reference.docx/pptx/odt</code>. See the
      manual for the
      <a href="https://pandoc.org/MANUAL.html#option--reference-doc"
        ><code>--reference-doc</code></a
      >
      option.
    </p>
    <h3 id="example-changing-the-font-and-line-spacing-in-a-word-docx">
      Example: changing the font and line spacing in a Word docx
    </h3>
    <p>TODO</p>
    <h2 id="filters">Filters</h2>
    <p>
      Templates are very powerful, but they are only a sort of scaffold to place
      your document’s body text in. You cannot directly change the body text
      using the template.
    </p>
    <p>
      If you need to affect the output of the actual body text, you can use a
      pandoc filter. A filter is a small program that transforms the document,
      between the parsing and the writing phase, while it is still in pandoc’s
      native format. For example, a filter might find all the Header elements of
      a document and capitalize their text.
    </p>
    <p>
      Pandoc’s native representation of a document is an abstract syntax tree
      (AST), not unlike the HTML DOM. It is documented
      <a
        href="https://hackage.haskell.org/package/pandoc-types/docs/Text-Pandoc-Definition.html"
        >here</a
      >. A <code>Pandoc</code> document is a chunk of metadata
      (<code>Meta</code>) and a list of <code>Block</code>s. The
      <code>Block</code>s, in turn, are composed of other <code>Block</code>s
      and <code>Inline</code> elements. (<code>Block</code> elements are things
      like paragraphs, lists, headers, and code blocks.
      <code>Inline</code> elements are individual words, links, emphasis, and so
      on.) Filters operate on these elements. You can use
      <code>pandoc -t native</code> to learn about the AST’s structure.
    </p>
    <p>
      There are two kinds of filters: JSON filters (which transform a JSON
      serialization of the pandoc AST, and may be written in any language that
      can parse and emit JSON), and Lua filters (which use an interface built
      directly into pandoc, and must be written in the Lua language). If you are
      writing your own filters, it is best to use Lua filters, which are more
      portable (they require only pandoc itself) and more efficient. See
      <a href="https://pandoc.org/lua-filters.html">Lua filters</a> for
      documentation and examples. If you would prefer to write your filter in
      another language, see
      <a href="https://pandoc.org/filters.html">Filters</a> for a gentle
      introduction to JSON filters.
    </p>
    <p>
      There’s a repository of lua filters at
      <a href="https://github.com/pandoc/lua-filters">pandoc/lua-filters</a> on
      GitHub. A number of pandoc filters, written in Haskell, are available on
      <a href="https://hackage.haskell.org/packages/search?terms=pandoc+filter"
        >Hackage</a
      >
      and can be installed using the <code>stack</code> or
      <code>cabal</code> tools. The wiki also lists
      <a href="https://github.com/jgm/pandoc/wiki/Pandoc-Filters"
        >third party filters</a
      >.
    </p>
    <h3 id="example-capitalizing-headers">Example: capitalizing headers</h3>
    <p>TODO</p>
    <h3 id="example-code-extractor">Example: code extractor</h3>
    <p>TODO</p>
    <h2 id="generic-divs-and-spans">Generic Divs and Spans</h2>
    <p>
      TODO
      <a href="https://pandoc.org/MANUAL.html#divs-and-spans">Divs and Spans</a
      >: generic blocks that can be transformed with filters
    </p>
    <h3 id="example-colored-text">Example: colored text</h3>
    <h3 id="example-custom-styles-in-docx">Example: custom styles in docx</h3>
    <p>
      <a href="https://pandoc.org/MANUAL.html#custom-styles-in-docx"
        >Custom Styles in Docx</a
      >
    </p>
    <h2 id="raw-attributes">Raw attributes</h2>
    <p>
      TODO
      <a href="https://pandoc.org/MANUAL.html#generic-raw-attribute"
        >Generic raw attributes</a
      >: to include raw snippets
    </p>
    <h2 id="custom-writers">Custom writers</h2>
    <p>
      TODO
      <a href="https://pandoc.org/MANUAL.html#custom-writers">Custom writers</a>
    </p>
    <h2 id="custom-syntax-highlighting">Custom syntax highlighting</h2>
    <p>
      TODO
      <a href="https://pandoc.org/MANUAL.html#syntax-highlighting"
        >Custom syntax highlighting</a
      >, provided by the
      <a href="https://github.com/jgm/skylighting">skylighting library</a>
    </p>
    <p>including highlighting styles</p>
  </body>
</html>
