<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>part-5-ui-react</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<p><a href="../official/index.html" class="navbar__brand"><strong>Redux</strong></a></p>
<p><a href="../official/introduction/getting-started.html" class="navbar__item navbar__link">Getting Started</a><a href="../essentials/part-1-overview-concepts.html" class="navbar__item navbar__link">Tutorial</a><a href="../official/api/api-reference.html" class="navbar__item navbar__link">API</a><a href="../official/faq.html" class="navbar__item navbar__link">FAQ</a><a href="../official/style-guide/style-guide.html" class="navbar__item navbar__link">Best Practices</a><a href="../official/../github.com/reduxjs/redux.html" class="navbar__item navbar__link">GitHub</a><a href="../official/introduction/getting-started.html#help-and-discussion" class="navbar__item navbar__link">Need help?</a> <a href="../official/index.html" class="navbar__brand"><strong>Redux</strong></a></p>
<ul>
<li><a href="../official/introduction/getting-started.html" class="menu__link">Getting Started</a></li>
<li><a href="../essentials/part-1-overview-concepts.html" class="menu__link">Tutorial</a></li>
<li><a href="../official/api/api-reference.html" class="menu__link">API</a></li>
<li><a href="../official/faq.html" class="menu__link">FAQ</a></li>
<li><a href="../official/style-guide/style-guide.html" class="menu__link">Best Practices</a></li>
<li><a href="../official/../github.com/reduxjs/redux.html" class="menu__link">GitHub</a></li>
<li><p><a href="../official/introduction/getting-started.html#help-and-discussion" class="menu__link">Need help?</a></p></li>
<li><a href="#!" class="menu__link menu__link--sublist">Introduction</a>
<ul>
<li><a href="../official/introduction/getting-started.html" class="menu__link">Getting Started with Redux</a></li>
<li><a href="../official/introduction/installation.html" class="menu__link">Installation</a></li>
<li><a href="../official/introduction/core-concepts.html" class="menu__link">Core Concepts</a></li>
<li><a href="../official/introduction/learning-resources.html" class="menu__link">Learning Resources</a></li>
<li><a href="../official/introduction/ecosystem.html" class="menu__link">Ecosystem</a></li>
<li><a href="../official/introduction/examples.html" class="menu__link">Examples</a></li>
</ul></li>
<li><p><a href="#!" class="menu__link menu__link--sublist menu__link--active">Tutorials</a></p>
<ul>
<li><a href="../index.html" class="menu__link">Tutorials Index</a></li>
<li><a href="../quick-start.html" class="menu__link">Quick Start</a></li>
<li><a href="../typescript-quick-start.html" class="menu__link">TypeScript Quick Start</a></li>
<li><a href="#!" class="menu__link menu__link--sublist">Redux Essentials</a>
<ul>
<li><a href="../essentials/part-1-overview-concepts.html" class="menu__link">Redux Overview and Concepts</a></li>
<li><a href="../essentials/part-2-app-structure.html" class="menu__link">Redux App Structure</a></li>
<li><a href="../essentials/part-3-data-flow.html" class="menu__link">Basic Redux Data Flow</a></li>
<li><a href="../essentials/part-4-using-data.html" class="menu__link">Using Redux Data</a></li>
<li><a href="../essentials/part-5-async-logic.html" class="menu__link">Async Logic and Data Fetching</a></li>
<li><a href="../essentials/part-6-performance-normalization.html" class="menu__link">Performance and Normalizing Data</a></li>
</ul></li>
<li><p><a href="#!" class="menu__link menu__link--sublist menu__link--active">Redux Fundamentals</a></p>
<ul>
<li><a href="part-1-overview.html" class="menu__link">Redux Overview</a></li>
<li><a href="part-2-concepts-data-flow.html" class="menu__link">Redux Concepts and Data Flow</a></li>
<li><a href="part-3-state-actions-reducers.html" class="menu__link">State, Actions, and Reducers</a></li>
<li><a href="part-4-store.html" class="menu__link">Store</a></li>
<li><a href="part-5-ui-react.html" class="menu__link menu__link--active active">UI and React</a></li>
<li><a href="part-6-async-logic.html" class="menu__link">Async Logic and Data Fetching</a></li>
<li><a href="part-7-standard-patterns.html" class="menu__link">Standard Redux Patterns</a></li>
<li><a href="part-8-modern-redux.html" class="menu__link">Modern Redux with Redux Toolkit</a></li>
</ul></li>
<li><a href="../official/recipes/recipe-index.html" class="menu__link">Recipes: Index</a></li>
<li><a href="../official/recipes/configuring-your-store.html" class="menu__link">Configuring Your Store</a></li>
<li><a href="../official/recipes/usage-with-typescript.html" class="menu__link">Usage With TypeScript</a></li>
<li><a href="../official/recipes/migrating-to-redux.html" class="menu__link">Migrating to Redux</a></li>
<li><a href="../official/recipes/using-object-spread-operator.html" class="menu__link">Using Object Spread Operator</a></li>
<li><a href="../official/recipes/reducing-boilerplate.html" class="menu__link">Reducing Boilerplate</a></li>
<li><a href="../official/recipes/server-rendering.html" class="menu__link">Server Rendering</a></li>
<li><a href="../official/recipes/writing-tests.html" class="menu__link">Writing Tests</a></li>
<li><a href="../official/recipes/computing-derived-data.html" class="menu__link">Computing Derived Data</a></li>
<li><a href="../official/recipes/implementing-undo-history.html" class="menu__link">Implementing Undo History</a></li>
<li><a href="../official/recipes/isolating-redux-sub-apps.html" class="menu__link">Isolating Redux Sub-Apps</a></li>
<li><a href="../official/recipes/code-splitting.html" class="menu__link">Code Splitting</a></li>
<li><a href="../official/recipes/troubleshooting.html" class="menu__link">Troubleshooting</a></li>
<li><a href="#!" class="menu__link menu__link--sublist">Structuring Reducers</a>
<ul>
<li><a href="../official/recipes/structuring-reducers/structuring-reducers.html" class="menu__link">Structuring Reducers</a></li>
<li><a href="../official/recipes/structuring-reducers/prerequisite-concepts.html" class="menu__link">Prerequisite Concepts</a></li>
<li><a href="../official/recipes/structuring-reducers/basic-reducer-structure.html" class="menu__link">Basic Reducer Structure</a></li>
<li><a href="../official/recipes/structuring-reducers/splitting-reducer-logic.html" class="menu__link">Splitting Reducer Logic</a></li>
<li><a href="../official/recipes/structuring-reducers/refactoring-reducer-example.html" class="menu__link">Refactoring Reducers Example</a></li>
<li><a href="../official/recipes/structuring-reducers/using-combinereducers.html" class="menu__link">Using combineReducers</a></li>
<li><a href="../official/recipes/structuring-reducers/beyond-combinereducers.html" class="menu__link">Beyond combineReducers</a></li>
<li><a href="../official/recipes/structuring-reducers/normalizing-state-shape.html" class="menu__link">Normalizing State Shape</a></li>
<li><a href="../official/recipes/structuring-reducers/updating-normalized-data.html" class="menu__link">Updating Normalized Data</a></li>
<li><a href="../official/recipes/structuring-reducers/reusing-reducer-logic.html" class="menu__link">Reusing Reducer Logic</a></li>
<li><a href="../official/recipes/structuring-reducers/immutable-update-patterns.html" class="menu__link">Immutable Update Patterns</a></li>
<li><a href="../official/recipes/structuring-reducers/initializing-state.html" class="menu__link">Initializing State</a></li>
</ul></li>
</ul></li>
<li><a href="#!" class="menu__link menu__link--sublist">Understanding Redux</a>
<ul>
<li><a href="#!" class="menu__link menu__link--sublist">Thinking in Redux</a>
<ul>
<li><a href="../official/understanding/thinking-in-redux/motivation.html" class="menu__link">Motivation</a></li>
<li><a href="../official/understanding/thinking-in-redux/three-principles.html" class="menu__link">Three Principles</a></li>
<li><a href="../official/understanding/thinking-in-redux/glossary.html" class="menu__link">Glossary</a></li>
</ul></li>
<li><a href="#!" class="menu__link menu__link--sublist">History and Design</a>
<ul>
<li><a href="../official/understanding/history-and-design/prior-art.html" class="menu__link">Prior Art</a></li>
<li><a href="../official/understanding/history-and-design/middleware.html" class="menu__link">Middleware</a></li>
</ul></li>
</ul></li>
<li><a href="#!" class="menu__link menu__link--sublist">FAQ</a>
<ul>
<li><a href="../official/faq.html" class="menu__link">FAQ Index</a></li>
<li><a href="../official/faq/general.html" class="menu__link">General</a></li>
<li><a href="../official/faq/reducers.html" class="menu__link">Reducers</a></li>
<li><a href="../official/faq/organizing-state.html" class="menu__link">Organizing State</a></li>
<li><a href="../official/faq/store-setup.html" class="menu__link">Store Setup</a></li>
<li><a href="../official/faq/actions.html" class="menu__link">Actions</a></li>
<li><a href="../official/faq/immutable-data.html" class="menu__link">Immutable Data</a></li>
<li><a href="../official/faq/code-structure.html" class="menu__link">Code Structure</a></li>
<li><a href="../official/faq/performance.html" class="menu__link">Performance</a></li>
<li><a href="../official/faq/design-decisions.html" class="menu__link">Design Decisions</a></li>
<li><a href="../official/faq/react-redux.html" class="menu__link">React Redux</a></li>
<li><a href="../official/faq/miscellaneous.html" class="menu__link">Miscellaneous</a></li>
</ul></li>
<li><a href="#!" class="menu__link menu__link--sublist">Style Guide</a>
<ul>
<li><a href="../official/style-guide/style-guide.html" class="menu__link">Style Guide: Best Practices</a></li>
</ul></li>
<li><a href="#!" class="menu__link menu__link--sublist">API Reference</a>
<ul>
<li><a href="../official/api/api-reference.html" class="menu__link">API Reference</a></li>
<li><a href="../official/api/createstore.html" class="menu__link">createStore</a></li>
<li><a href="../official/api/store.html" class="menu__link">Store</a></li>
<li><a href="../official/api/combinereducers.html" class="menu__link">combineReducers</a></li>
<li><a href="../official/api/applymiddleware.html" class="menu__link">applyMiddleware</a></li>
<li><a href="../official/api/bindactioncreators.html" class="menu__link">bindActionCreators</a></li>
<li><a href="../official/api/compose.html" class="menu__link">compose</a></li>
</ul></li>
<li><a href="#!" class="menu__link menu__link--sublist">Redux Toolkit</a>
<ul>
<li><a href="../official/redux-toolkit/overview.html" class="menu__link">Redux Toolkit: Overview</a></li>
</ul></li>
</ul>
<h1 id="redux-fundamentals-part-5-ui-and-react"><span id="redux-fundamentals-part-5-ui-and-react" class="anchor enhancedAnchor_2LWZ"></span>Redux Fundamentals, Part 5: UI and React<a href="#redux-fundamentals-part-5-ui-and-react" class="hash-link" title="Direct link to heading">#</a></h1>
<h5 id="what-youll-learn"><span class="admonition-icon"> </span>What You’ll Learn</h5>
<ul>
<li>How a Redux store works with a UI</li>
<li>How to use Redux with React</li>
</ul>
<h2 id="introduction"><span id="introduction" class="anchor enhancedAnchor_2LWZ"></span>Introduction<a href="#introduction" class="hash-link" title="Direct link to heading">#</a></h2>
<p>In <a href="part-4-store.html">Part 4: Store</a>, we saw how to create a Redux store, dispatch actions, and read the current state. We also looked at how a store works inside, how enhancers and middleware let us customize the store with additional abilities, and how to add the Redux DevTools to let us see what’s happening inside our app as actions are dispatched.</p>
<p>In this section, we’ll add a User Interface for our todo app. We’ll see how Redux works with a UI layer overall, and we’ll specifically cover how Redux works together with React.</p>
<h2 id="integrating-redux-with-a-ui"><span id="integrating-redux-with-a-ui" class="anchor enhancedAnchor_2LWZ"></span>Integrating Redux with a UI<a href="#integrating-redux-with-a-ui" class="hash-link" title="Direct link to heading">#</a></h2>
<p>Redux is a standalone JS library. As we’ve already seen, you can create and use a Redux store even if you don’t have a user interface set up. This also means that <strong>you can use Redux with any UI framework</strong> (or even without <em>any</em> UI framework), and use it on both client and server. You can write Redux apps with React, Vue, Angular, Ember, jQuery, or vanilla JavaScript.</p>
<p>That said, <strong>Redux was specifically designed to work well with <a href="../../../reactjs.org/index.html">React</a></strong>. React lets you describe your UI as a function of your state, and Redux contains state and updates it in response to actions.</p>
<p>Because of that, we’ll use React for this tutorial as we build our todo app, and cover the basics of how to use React with Redux.</p>
<p>Before we get to that part, let’s take a quick look at how Redux interacts with a UI layer in general.</p>
<h3 id="basic-redux-and-ui-integration"><span id="basic-redux-and-ui-integration" class="anchor enhancedAnchor_2LWZ"></span>Basic Redux and UI Integration<a href="#basic-redux-and-ui-integration" class="hash-link" title="Direct link to heading">#</a></h3>
<p>Using Redux with any UI layer requires a few consistent steps:</p>
<ol type="1">
<li>Create a Redux store</li>
<li>Subscribe to updates</li>
<li>Inside the subscription callback:
<ol type="1">
<li>Get the current store state</li>
<li>Extract the data needed by this piece of UI</li>
<li>Update the UI with the data</li>
</ol></li>
<li>If necessary, render the UI with initial state</li>
<li>Respond to UI inputs by dispatching Redux actions</li>
</ol>
<p>Let’s go back to the <a href="part-1-overview.html">the counter app example we saw in Part 1</a> and see how it follows those steps:</p>
<p><span class="token comment" style="color: #c6cad2">// 1) Create a new Redux store with the `createStore` function</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> store </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token maybe-class-name">Redux</span><span class="token punctuation" style="color: #f8f8f2">.</span><span style="color: #e6d874">createStore</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">counterReducer</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token comment" style="color: #c6cad2">// 2) Subscribe to redraw whenever the data changes in the future</span><span class="token plain"></span></p>
<p><span class="token plain">store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span style="color: #e6d874">subscribe</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">render</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token comment" style="color: #c6cad2">// Our “user interface” is some text in a single HTML element</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> valueEl </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token dom variable" style="color: #f8f8f2">document</span><span class="token punctuation" style="color: #f8f8f2">.</span><span style="color: #e6d874">getElementById</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token string" style="color: #a6e22e">‘value’</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token comment" style="color: #c6cad2">// 3) When the subscription callback runs:</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">render</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// 3.1) Get the current store state</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> state </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span style="color: #e6d874">getState</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// 3.2) Extract the data you want</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> newValue </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">value</span><span class="token punctuation" style="color: #f8f8f2">.</span><span style="color: #e6d874">toString</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// 3.3) Update the UI with the new value</span><span class="token plain"></span></p>
<p><span class="token plain"> valueEl</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> newValue</span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token comment" style="color: #c6cad2">// 4) Display the UI with the initial store state</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token function" style="color: #e6d874">render</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token comment" style="color: #c6cad2">// 5) Dispatch actions based on UI inputs</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token dom variable" style="color: #f8f8f2">document</span><span class="token punctuation" style="color: #f8f8f2">.</span><span style="color: #e6d874">getElementById</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token string" style="color: #a6e22e">‘increment’</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token punctuation" style="color: #f8f8f2">.</span><span style="color: #e6d874">addEventListener</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token string" style="color: #a6e22e">‘click’</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span style="color: #e6d874">dispatch</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> type</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘counter/incremented’</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span>No matter what UI layer you’re using, <strong>Redux works this same way with every UI</strong>. The actual implementations are typically a bit more complicated to help optimize performance, but it’s the same steps each time.</p>
<p>Since Redux is a separate library, there are different “binding” libraries to help you use Redux with a given UI framework. Those UI binding libraries handle the details of subscribing to the store and efficiently updating the UI as state changes, so that you don’t have to write that code yourself.</p>
<h2 id="using-redux-with-react"><span id="using-redux-with-react" class="anchor enhancedAnchor_2LWZ"></span>Using Redux with React<a href="#using-redux-with-react" class="hash-link" title="Direct link to heading">#</a></h2>
<p>The official <a href="../../../react-redux.js.org/index.html"><strong>React-Redux UI bindings library</strong></a> is a separate package from the Redux core. You’ll need to install that in addition as well:</p>
<p><span class="token plain">npm install react-redux</span>(If you don’t use npm, you may grab the latest UMD build from unpkg (either a <a href="../../../unpkg.com/react-redux%407.2.4/dist/react-redux.js">development</a> or a <a href="../../../unpkg.com/react-redux%407.2.4/dist/react-redux.min.js">production</a> build). The UMD build exports a global called <code>window.ReactRedux</code> if you add it to your page via a <code>&lt;script&gt;</code> tag.)</p>
<p>For this tutorial, we’ll cover the most important patterns and examples you need to use React and Redux together, and see how they work in practice as part of our todo app.</p>
<h5 id="info"><span class="admonition-icon"> </span>info</h5>
<p>See <strong>the official React-Redux docs at <a href="../../../react-redux.js.org/index.html">https://react-redux.js.org</a></strong> for a complete guide on how to use Redux and React together, and reference documentation on the React-Redux APIs.</p>
<h3 id="designing-the-component-tree"><span id="designing-the-component-tree" class="anchor enhancedAnchor_2LWZ"></span>Designing the Component Tree<a href="#designing-the-component-tree" class="hash-link" title="Direct link to heading">#</a></h3>
<p>Much like we <a href="part-3-state-actions-reducers.html#designing-the-state-structure">designed the state structure</a> based on requirements, we can also design the overall set of UI components and how they related to each other in the application.</p>
<p>Based on <a href="part-3-state-actions-reducers.html#defining-requirements">the list of business requirements for the app</a>, at a minimum we’re going to need this set of components:</p>
<ul>
<li><strong><code>&lt;App&gt;</code></strong>: the root component that renders everything else.
<ul>
<li><strong><code>&lt;Header&gt;</code></strong>: contains the “new todo” text input and the “complete all todos” checkbox</li>
<li><strong><code>&lt;TodoList&gt;</code></strong>: a list of all currently visible todo items, based on the filtered results
<ul>
<li><strong><code>&lt;TodoListItem&gt;</code></strong>: a single todo list item, with a checkbox that can be clicked to toggle the todo’s completed status, and a color category selector</li>
</ul></li>
<li><strong><code>&lt;Footer&gt;</code></strong>: Shows the number of active todos and controls for filtering the list based on completed status and color category</li>
</ul></li>
</ul>
<p>Beyond this basic component structure, we could potentially divide the components up in several different ways. For example, the <code>&lt;Footer&gt;</code> component <em>could</em> be one larger component, or it could have multiple smaller components inside like <code>&lt;CompletedTodos&gt;</code>, <code>&lt;StatusFilter&gt;</code>, and <code>&lt;ColorFilters&gt;</code>. There’s no single right way to divide these, and you’ll find that it may be better to write larger components or split things into many smaller components depending on your situation.</p>
<p>For now, we’ll start with this small list of components to keep things easier to follow. On that note, since we assume that <a href="../../../reactjs.org/index.html">you already know React</a>, <strong>we’re going to skip past the details of how to write the layout code for these components and focus on how to actually use the React-Redux library in your React components</strong>.</p>
<p>Here’s the initial React UI of this app looks like before we start adding any Redux-related logic:</p>
<h3 id="reading-state-from-the-store-with-useselector"><span id="reading-state-from-the-store-with-useselector" class="anchor enhancedAnchor_2LWZ"></span>Reading State from the Store with <code>useSelector</code><a href="#reading-state-from-the-store-with-useselector" class="hash-link" title="Direct link to heading">#</a></h3>
<p>We know that we need to be able to show a list of todo items. Let’s start by creating a <code>&lt;TodoList&gt;</code> component that can read the list of todos from the store, loop over them, and show one <code>&lt;TodoListItem&gt;</code> component for each todo entry.</p>
<p>You should be familiar with <a href="../../../reactjs.org/docs/hooks-state.html">React hooks like <code>useState</code></a>, which can be called in React function components to give them access to React state values. React also lets us write <a href="../../../reactjs.org/docs/hooks-custom.html">custom hooks</a>, which let us extract reusable hooks to add our own behavior on top of React’s built-in hooks.</p>
<p>Like many other libraries, React-Redux includes <a href="../../../react-redux.js.org/api/hooks.html">its own custom hooks</a>, which you can use in your own components. The React-Redux hooks give your React component the ability to talk to the Redux store by reading state and dispatching actions.</p>
<p>The first React-Redux hook that we’ll look at is the <a href="../../../react-redux.js.org/api/hooks.html#useselector"><strong><code>useSelector</code> hook</strong></a>, which <strong>lets your React components read data from the Redux store</strong>.</p>
<p><code>useSelector</code> accepts a single function, which we call a <strong>selector</strong> function. <strong>A selector is a function that takes the entire Redux store state as its argument, reads some value from the state, and returns that result</strong>.</p>
<p>For example, we know that our todo app’s Redux state keeps the array of todo items as <code>state.todos</code>. We can write a small selector function that returns that todos array:</p>
<p><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">selectTodos</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">todos</span>Or, maybe we want to find out how many todos are currently marked as “completed”:</p>
<p><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">selectTotalCompletedTodos</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> completedTodos </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color: #f8f8f2">.</span><span style="color: #e6d874">filter</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> todo</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">completed</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> completedTodos</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">length</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span>So, <strong>selectors can return values from the Redux store state, and also return <em>derived</em> values based on that state as well</strong>.</p>
<p>Let’s read the array of todos into our <code>&lt;TodoList&gt;</code> component. First, we’ll import the <code>useSelector</code> hook from the <code>react-redux</code> library, then call it with a selector function as its argument:</p>
<p>src/features/todos/TodoList.js</p>
<p><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> React </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> useSelector </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react-redux’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> TodoListItem </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘./TodoListItem’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">selectTodos</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">todos</span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">TodoList</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> todos </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">useSelector</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">selectTodos</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// since `todos` is an array, we can loop over it</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> renderedListItems </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> todos</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token function" style="color: #e6d874">map</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag class-name" style="color: #f92672">TodoListItem</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">todo</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">.</span><span class="token tag script language-javascript" style="color: #f92672">id</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">todo</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">todo</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag punctuation" style="color: #f8f8f2">/&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">ul</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">className</span><span class="token tag attr-value punctuation attr-equals" style="color: #f8f8f2">=</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag attr-value" style="color: #e6d874">todo-list</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain">renderedListItems</span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag" style="color: #f92672">ul</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">export</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">default</span><span class="token plain"> TodoList</span>The first time the <code>&lt;TodoList&gt;</code> component renders, the <code>useSelector</code> hook will call <code>selectTodos</code> and pass in the <em>entire</em> Redux state object. Whatever the selector returns will be returned by the hook to your component. So, the <code>const todos</code> in our component will end up holding the same <code>state.todos</code> array inside our Redux store state.</p>
<p>But, what happens if we dispatch an action like <code>{type: 'todos/todoAdded'}</code>? The Redux state will be updated by the reducer, but our component needs to know that something has changed so that it can re-render with the new list of todos.</p>
<p>We know that we can call <code>store.subscribe()</code> to listen for changes to the store, so we <em>could</em> try writing the code to subscribe to the store in every component. But, that would quickly get very repetitive and hard to handle.</p>
<p>Fortunately, <strong><code>useSelector</code> automatically subscribes to the Redux store for us!</strong> That way, any time an action is dispatched, it will call its selector function again right away. <strong>If the value returned by the selector changes from the last time it ran, <code>useSelector</code> will force our component to re-render with the new data</strong>. All we have to do is call <code>useSelector()</code> once in our component, and it does the rest of the work for us.</p>
<p>However, there’s a very important thing to remember here:</p>
<h5 id="caution"><span class="admonition-icon"> </span>caution</h5>
<p><strong><code>useSelector</code> compares its results using strict <code>===</code> reference comparisons, so the component will re-render any time the selector result is a new reference!</strong> This means that if you create a new reference in your selector and return it, your component could re-render <em>every</em> time an action has been dispatched, even if the data really isn’t different.</p>
<p>For example, passing this selector to <code>useSelector</code> will cause the component to <em>always</em> re-render, because <code>array.map()</code> always returns a new array reference:</p>
<p><span class="token comment" style="color: #c6cad2">// Bad: always returning a new reference</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">selectTodoDescriptions</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// This creates a new array reference!</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color: #f8f8f2">.</span><span style="color: #e6d874">map</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> todo</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">text</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span>##### <span class="admonition-icon"> </span>tip</p>
<p>We’ll talk about one way to fix this issue later in this section. We’ll also talk about how you can improve performance and avoid unnecessary re-renders using “memoized” selector function in <a href="part-7-standard-patterns.html">Part 7: Standard Redux Patterns</a>.</p>
<p>It’s also worth noting that we don’t have to write a selector function as a separate variable. You can write a selector function directly inside the call to <code>useSelector</code>, like this:</p>
<p><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> todos </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">useSelector</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color: #f8f8f2">)</span>### <span id="dispatching-actions-with-usedispatch" class="anchor enhancedAnchor_2LWZ"></span>Dispatching Actions with <code>useDispatch</code><a href="#dispatching-actions-with-usedispatch" class="hash-link" title="Direct link to heading">#</a></p>
<p>We now know how to read data from the Redux store into our components. But, how can we dispatch actions to the store from a component? We know that outside of React, we can call <code>store.dispatch(action)</code>. Since we don’t have access to the store in a component file, we need some way to get access to the <code>dispatch</code> function by itself inside our components.</p>
<p>The React-Redux <a href="../../../react-redux.js.org/api/hooks.html#usedispatch"><strong><code>useDispatch</code> hook</strong></a> gives us the store’s <code>dispatch</code> method as its result. (In fact, the implementation of the hook really is <code>return store.dispatch</code>.)</p>
<p>So, we can call <code>const dispatch = useDispatch()</code> in any component that needs to dispatch actions, and then call <code>dispatch(someAction)</code> as needed.</p>
<p>Let’s try that in our <code>&lt;Header&gt;</code> component. We know that we need to let the user type in some text for a new todo item, and then dispatch a <code>{type: 'todos/todoAdded'}</code> action containing that text.</p>
<p>We’ll write a typical React form component that uses <a href="../../../reactjs.org/docs/forms.html#controlled-components">“controlled inputs”</a> to let the user type in the form text. Then, when the user presses the Enter key specifically, we’ll dispatch that action.</p>
<p>src/features/header/Header.js</p>
<p><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> React</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> useState </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> useDispatch </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react-redux’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">Header</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">[</span><span class="token plain">text</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> setText</span><span class="token punctuation" style="color: #f8f8f2">]</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">useState</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token string" style="color: #a6e22e">’’</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">useDispatch</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">handleChange</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token parameter">e</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">setText</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">e</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">target</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">value</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">handleKeyDown</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token parameter">e</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> trimmedText </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> e</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">target</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">value</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token function" style="color: #e6d874">trim</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// If the user pressed the Enter key:</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">e</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">key </span><span class="token operator" style="color: #f8f8f2">===</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘Enter’</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">&amp;&amp;</span><span class="token plain"> trimmedText</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Dispatch the “todo added” action with this text</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token function" style="color: #e6d874">dispatch</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> type</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘todos/todoAdded’</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> payload</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> trimmedText </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// And clear out the text input</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token function" style="color: #e6d874">setText</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token string" style="color: #a6e22e">’’</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">input</span><span class="token tag" style="color: #f92672"></span></p>
<p><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">type</span><span class="token tag attr-value punctuation attr-equals" style="color: #f8f8f2">=</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag attr-value" style="color: #e6d874">text</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag" style="color: #f92672"></span></p>
<p><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">placeholder</span><span class="token tag attr-value punctuation attr-equals" style="color: #f8f8f2">=</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag attr-value" style="color: #e6d874">What needs to be done?</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag" style="color: #f92672"></span></p>
<p><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">autoFocus</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript boolean" style="color: #ae81ff">true</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"></span></p>
<p><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">text</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"></span></p>
<p><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">handleChange</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"></span></p>
<p><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">onKeyDown</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">handleKeyDown</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"></span></p>
<p><span class="token tag" style="color: #f92672"> </span><span class="token tag punctuation" style="color: #f8f8f2">/&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">export</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">default</span><span class="token plain"> Header</span>### <span id="passing-the-store-with-provider" class="anchor enhancedAnchor_2LWZ"></span>Passing the Store with <code>Provider</code><a href="#passing-the-store-with-provider" class="hash-link" title="Direct link to heading">#</a></p>
<p>Our components can now read state from the store, and dispatch actions to the store. However, we’re still missing something. Where and how are the React-Redux hooks finding the right Redux store? A hook is a JS function, so it can’t automatically import a store from <code>store.js</code> by itself.</p>
<p>Instead, we have to specifically tell React-Redux what store we want to use in our components. We do this by <strong>rendering a <code>&lt;Provider&gt;</code> component around our entire <code>&lt;App&gt;</code>, and passing the Redux store as a prop to <code>&lt;Provider&gt;</code></strong>. After we do this once, every component in the application will be able to access the Redux store if needs to.</p>
<p>Let’s add that to our main <code>index.js</code> file:</p>
<p>src/index.js</p>
<p><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> React </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> ReactDOM </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react-dom’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> Provider </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react-redux’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> App </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘./App’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> store </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘./store’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain">ReactDOM</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token function" style="color: #e6d874">render</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Render a `&lt;Provider&gt;` around the entire `&lt;App&gt;`,</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// and pass the Redux store to as a prop</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag class-name" style="color: #f92672">React.StrictMode</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag class-name" style="color: #f92672">Provider</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">store</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">store</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag class-name" style="color: #f92672">App</span><span class="token tag" style="color: #f92672"> </span><span class="token tag punctuation" style="color: #f8f8f2">/&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag class-name" style="color: #f92672">Provider</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag class-name" style="color: #f92672">React.StrictMode</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"></span></p>
<p><span class="token plain"> document</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token function" style="color: #e6d874">getElementById</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token string" style="color: #a6e22e">‘root’</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">)</span>That covers the key parts of using React-Redux with React:</p>
<ul>
<li>Call the <code>useSelector</code> hook to read data in React components</li>
<li>Call the <code>useDispatch</code> hook to dispatch actions in React components</li>
<li>Put <code>&lt;Provider store={store}&gt;</code> around your entire <code>&lt;App&gt;</code> component so that other components can talk to the store</li>
</ul>
<p>We should now be able to actually interact with the app! Here’s the working UI so far:</p>
<p>Now, let’s look at a couple more ways we can use these together in our todo app.</p>
<h2 id="react-redux-patterns"><span id="react-redux-patterns" class="anchor enhancedAnchor_2LWZ"></span>React-Redux Patterns<a href="#react-redux-patterns" class="hash-link" title="Direct link to heading">#</a></h2>
<h3 id="global-state-component-state-and-forms"><span id="global-state-component-state-and-forms" class="anchor enhancedAnchor_2LWZ"></span>Global State, Component State, and Forms<a href="#global-state-component-state-and-forms" class="hash-link" title="Direct link to heading">#</a></h3>
<p>By now you might be wondering, “Do I always have to put all my app’s state into the Redux store?”</p>
<p>The answer is <strong>NO. Global state that is needed across the app should go in the Redux store. State that’s only needed in one place should be kept in component state.</strong></p>
<p>A good example of this is the <code>&lt;Header&gt;</code> component we wrote earlier. We <em>could</em> keep the current text input string in the Redux store, by dispatching an action in the input’s <code>onChange</code> handler and keeping it in our reducer. But, that doesn’t give us any benefit. The only place that text string is used is here, in the <code>&lt;Header&gt;</code> component.</p>
<p>So, it makes sense to keep that value in a <code>useState</code> hook here in the <code>&lt;Header&gt;</code> component.</p>
<p>Similarly, if we had a boolean flag called <code>isDropdownOpen</code>, no other components in the app would care about that - it should really stay local to this component.</p>
<h5 id="tip"><span class="admonition-icon"> </span>tip</h5>
<p><strong>In a React + Redux app, your global state should go in the Redux store, and your local state should stay in React components.</strong></p>
<p>If you’re not sure where to put something, here are some common rules of thumb for determining what kind of data should be put into Redux:</p>
<ul>
<li>Do other parts of the application care about this data?</li>
<li>Do you need to be able to create further derived data based on this original data?</li>
<li>Is the same data being used to drive multiple components?</li>
<li>Is there value to you in being able to restore this state to a given point in time (ie, time travel debugging)?</li>
<li>Do you want to cache the data (ie, use what’s in state if it’s already there instead of re-requesting it)?</li>
<li>Do you want to keep this data consistent while hot-reloading UI components (which may lose their internal state when swapped)?</li>
</ul>
<p>This is also a good example of how to think about forms in Redux in general. <strong>Most form state probably shouldn’t be kept in Redux.</strong> Instead, keep the data in your form components as you’re editing it, and then dispatch Redux actions to update the store when the user is done.</p>
<h3 id="using-multiple-selectors-in-a-component"><span id="using-multiple-selectors-in-a-component" class="anchor enhancedAnchor_2LWZ"></span>Using Multiple Selectors in a Component<a href="#using-multiple-selectors-in-a-component" class="hash-link" title="Direct link to heading">#</a></h3>
<p>Right now only our <code>&lt;TodoList&gt;</code> component is reading data from the store. Let’s see what it might look like for the <code>&lt;Footer&gt;</code> component to start reading some data as well.</p>
<p>The <code>&lt;Footer&gt;</code> needs to know three different pieces of information:</p>
<ul>
<li>How many completed todos there are</li>
<li>The current “status” filter value</li>
<li>The current list of selected “color” category filters</li>
</ul>
<p>How can we read these values into the component?</p>
<p><strong>We can call <code>useSelector</code> multiple times within one component</strong>. In fact, this is actually a good idea - <strong>each call to <code>useSelector</code> should always return the smallest amount of state possible</strong>.</p>
<p>We already saw how to write a selector that counts completed todos earlier. For the filters values, both the status filter value and the color filters values live in the <code>state.filters</code> slice. Since this component needs both of them, we can select the entire <code>state.filters</code> object.</p>
<p>As we mentioned earlier, we could put all the input handling directly into <code>&lt;Footer&gt;</code>, or we could split it out into separate components like <code>&lt;StatusFilter&gt;</code>. To keep this explanation shorter, we’ll skip the exact details of writing the input handling and assume we’ve got smaller separate components that are given some data and change handler callbacks as props.</p>
<p>Given that assumption, the React-Redux parts of the component might look like this:</p>
<p>src/features/footer/Footer.js</p>
<p><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> React </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> useSelector </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react-redux’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> availableColors</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> capitalize </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘../filters/colors’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> StatusFilters </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘../filters/filtersSlice’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token comment" style="color: #c6cad2">// Omit other footer components</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">Footer</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> todosRemaining </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">useSelector</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">state</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> uncompletedTodos </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">todos</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token function" style="color: #e6d874">filter</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">!</span><span class="token plain">todo</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">completed</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> uncompletedTodos</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">length</span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> status</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> colors </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">useSelector</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">state</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">filters</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// omit placeholder change handlers</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">footer</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">className</span><span class="token tag attr-value punctuation attr-equals" style="color: #f8f8f2">=</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag attr-value" style="color: #e6d874">footer</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">div</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">className</span><span class="token tag attr-value punctuation attr-equals" style="color: #f8f8f2">=</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag attr-value" style="color: #e6d874">actions</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">h5</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain">Actions</span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag" style="color: #f92672">h5</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">button</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">className</span><span class="token tag attr-value punctuation attr-equals" style="color: #f8f8f2">=</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag attr-value" style="color: #e6d874">button</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain">Mark All Completed</span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag" style="color: #f92672">button</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">button</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">className</span><span class="token tag attr-value punctuation attr-equals" style="color: #f8f8f2">=</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag attr-value" style="color: #e6d874">button</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain">Clear Completed</span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag" style="color: #f92672">button</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag" style="color: #f92672">div</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag class-name" style="color: #f92672">RemainingTodos</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">count</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">todosRemaining</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag punctuation" style="color: #f8f8f2">/&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag class-name" style="color: #f92672">StatusFilter</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">status</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">onStatusChange</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag punctuation" style="color: #f8f8f2">/&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag class-name" style="color: #f92672">ColorFilters</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">colors</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">onColorChange</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag punctuation" style="color: #f8f8f2">/&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag" style="color: #f92672">footer</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">export</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">default</span><span class="token plain"> Footer</span>### <span id="selecting-data-in-list-items-by-id" class="anchor enhancedAnchor_2LWZ"></span>Selecting Data in List Items by ID<a href="#selecting-data-in-list-items-by-id" class="hash-link" title="Direct link to heading">#</a></p>
<p>Currently, our <code>&lt;TodoList&gt;</code> is reading the entire <code>state.todos</code> array and passing the actual todo objects as a prop to each <code>&lt;TodoListItem&gt;</code> component.</p>
<p>This works, but there’s a potential performance problem.</p>
<ul>
<li>Changing one todo object means creating copies of both the todo and the <code>state.todos</code> array, and each copy is a new reference in memory</li>
<li>When <code>useSelector</code> sees a new reference as its result, it forces its component to re-render</li>
<li>So, any time <em>one</em> todo object is updated (like clicking it to toggle its completed status), the whole <code>&lt;TodoList&gt;</code> parent component will re-render</li>
<li>Then, <a href="../../../blog.isquaredsoftware.com/2020/05/blogged-answers-a-mostly-complete-guide-to-react-rendering-behavior/index.html#standard-render-behavior">because React re-renders all child components recursively by default</a>, it also means that <em>all</em> of the <code>&lt;TodoListItem&gt;</code> components will re-render, even though most of them didn’t actually change at all!</li>
</ul>
<p>Re-rendering components isn’t bad - that’s how React knows if it needs to update the DOM. But, re-rendering lots of components when nothing has actually changed can potentially get too slow if the list is too big.</p>
<p>There’s a couple ways we could try to fix this. One option is to <a href="../../../reactjs.org/docs/react-api.html#reactmemo">wrap all the <code>&lt;TodoListItem&gt;</code> components in <code>React.memo()</code></a>, so that they only re-render when their props actually change. This is often a good choice for improving performance, but it does require that the child component always receives the same props until something really changes. Since each <code>&lt;TodoListItem&gt;</code> component is receiving a todo item as a prop, only one of them should actually get a changed prop and have to re-render.</p>
<p>Another option is to have the <code>&lt;TodoList&gt;</code> component only read an array of todo IDs from the store, and pass those IDs as props to the child <code>&lt;TodoListItem&gt;</code> components. Then, each <code>&lt;TodoListItem&gt;</code> can use that ID to find the right todo object it needs.</p>
<p>Let’s give that a shot.</p>
<p>src/features/todos/TodoList.js</p>
<p><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> React </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> useSelector </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react-redux’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> TodoListItem </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘./TodoListItem’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">selectTodoIds</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">todos</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token function" style="color: #e6d874">map</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> todo</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">id</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">TodoList</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> todoIds </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">useSelector</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">selectTodoIds</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> renderedListItems </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> todoIds</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token function" style="color: #e6d874">map</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">todoId</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag class-name" style="color: #f92672">TodoListItem</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">todoId</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">id</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">todoId</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag punctuation" style="color: #f8f8f2">/&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">ul</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">className</span><span class="token tag attr-value punctuation attr-equals" style="color: #f8f8f2">=</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag attr-value" style="color: #e6d874">todo-list</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain">renderedListItems</span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag" style="color: #f92672">ul</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span>This time, we only select an array of todo IDs from the store in <code>&lt;TodoList&gt;</code>, and we pass each <code>todoId</code> as an <code>id</code> prop to the child <code>&lt;TodoListItem&gt;</code>s.</p>
<p>Then, in <code>&lt;TodoListItem&gt;</code>, we can use that ID value to read our todo item. We can also update <code>&lt;TodoListItem&gt;</code> to dispatch the “toggled” action based on the todo’s ID.</p>
<p>src/features/todos/TodoListItem.js</p>
<p><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> React </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> useSelector</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> useDispatch </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react-redux’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> availableColors</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> capitalize </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘../filters/colors’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">selectTodoById</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color: #f8f8f2">,</span><span class="token parameter"> todoId</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">todos</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token function" style="color: #e6d874">find</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> todo</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">id </span><span class="token operator" style="color: #f8f8f2">===</span><span class="token plain"> todoId</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token comment" style="color: #c6cad2">// Destructure `props.id`, since we only need the ID value</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">TodoListItem</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter punctuation" style="color: #f8f8f2">{</span><span class="token parameter"> id </span><span class="token parameter punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Call our `selectTodoById` with the state _and_ the ID value</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> todo </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">useSelector</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">state</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">selectTodoById</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">state</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> id</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> text</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> completed</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> color </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> todo</span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">useDispatch</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">handleCompletedChanged</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token function" style="color: #e6d874">dispatch</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> type</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘todos/todoToggled’</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> payload</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> todo</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">id </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// omit other change handlers</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// omit other list item rendering logic and contents</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">li</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">div</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">className</span><span class="token tag attr-value punctuation attr-equals" style="color: #f8f8f2">=</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag attr-value" style="color: #e6d874">view</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token comment" style="color: #c6cad2">/* omit other rendering output */</span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag" style="color: #f92672">div</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag" style="color: #f92672">li</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">export</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">default</span><span class="token plain"> TodoListItem</span>There’s a problem with this, though. We said earlier that <strong>returning new array references in selectors causes components to re-render every time</strong>, and right now we’re returning a new IDs array in <code>&lt;TodoList&gt;</code>. In this case, the <em>contents</em> of the IDs array should be the same if we’re toggling a todo, because we’re still showing the same todo items - we haven’t added or deleted any. But, the array <em>containing</em> those IDs is a new reference, so <code>&lt;TodoList&gt;</code> will re-render when it really doesn’t need to.</p>
<p>One possible solution to this is to change how <code>useSelector</code> compares its values to see if they’ve changed. <code>useSelector</code> can take a comparison function as its second argument. A comparison function is called with the old and new values, and returns <code>true</code> if they’re considered the same. If they’re the same, <code>useSelector</code> won’t make the component re-render.</p>
<p>React-Redux has a <code>shallowEqual</code> comparison function we can use to check if the items <em>inside</em> the array are still the same. Let’s try that:</p>
<p>src/features/todos/TodoList.js</p>
<p><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> React </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> useSelector</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> shallowEqual </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘react-redux’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">import</span><span class="token plain"> TodoListItem </span><span class="token keyword" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘./TodoListItem’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">selectTodoIds</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">todos</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token function" style="color: #e6d874">map</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> todo</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token plain">id</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">TodoList</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> todoIds </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">useSelector</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">selectTodoIds</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> shallowEqual</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> renderedListItems </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> todoIds</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token function" style="color: #e6d874">map</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">todoId</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag class-name" style="color: #f92672">TodoListItem</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">todoId</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">id</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: #f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">{</span><span class="token tag script language-javascript" style="color: #f92672">todoId</span><span class="token tag script language-javascript punctuation" style="color: #f8f8f2">}</span><span class="token tag" style="color: #f92672"> </span><span class="token tag punctuation" style="color: #f8f8f2">/&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color: #f8f8f2">&lt;</span><span class="token tag" style="color: #f92672">ul</span><span class="token tag" style="color: #f92672"> </span><span class="token tag attr-name" style="color: #a6e22e">className</span><span class="token tag attr-value punctuation attr-equals" style="color: #f8f8f2">=</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag attr-value" style="color: #e6d874">todo-list</span><span class="token tag attr-value punctuation" style="color: #f8f8f2">"</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain">renderedListItems</span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token tag punctuation" style="color: #f8f8f2">&lt;/</span><span class="token tag" style="color: #f92672">ul</span><span class="token tag punctuation" style="color: #f8f8f2">&gt;</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span>Now, if we toggle a todo item, the list of IDs will be considered the same, and <code>&lt;TodoList&gt;</code> won’t have to re-render. The one <code>&lt;TodoListItem&gt;</code> will get an updated todo object and re-render, but all the rest of them will still have the existing todo object and not have to re-render at all.</p>
<p>As mentioned earlier, you can also use a specialized kind of selector function called <a href="part-7-standard-patterns.html">a “memoized selector”</a> to help improve component rendering, and we’ll look at how to use those in another section.</p>
<h2 id="what-youve-learned"><span id="what-youve-learned" class="anchor enhancedAnchor_2LWZ"></span>What You’ve Learned<a href="#what-youve-learned" class="hash-link" title="Direct link to heading">#</a></h2>
<p>We now have a working todo app! Our app creates a store, passes the store to the React UI layer using <code>&lt;Provider&gt;</code>, and then calls <code>useSelector</code> and <code>useDispatch</code> to talk to the store in our React components.</p>
<h5 id="info-1"><span class="admonition-icon"> </span>info</h5>
<p>Try implementing the rest of the missing UI features on your own! Here’s a list of the things you’ll need to add:</p>
<ul>
<li>In <code>&lt;TodoListItem&gt;</code> component, use the <code>useDispatch</code> hook to dispatch actions to for changing the color category and deleting the todo</li>
<li>In <code>&lt;Footer&gt;</code>, use the <code>useDispatch</code> hook to dispatch actions for marking all todos as completed, clearing completed todos, and changing the filter values.</li>
</ul>
<p>We’ll cover implementing the filters in <a href="part-7-standard-patterns.html">Part 7: Standard Redux Patterns</a>.</p>
<p>Let’s see how the app looks now, including the components and sections we skipped to keep this shorter:</p>
<h5 id="summary"><span class="admonition-icon"> </span>Summary</h5>
<ul>
<li><strong>Redux stores can be used with any UI layer</strong>
<ul>
<li>UI code always subscribes to the store, gets the latest state, and redraws itself</li>
</ul></li>
<li><strong>React-Redux is the official Redux UI bindings library for React</strong>
<ul>
<li>React-Redux is installed as a separate <code>react-redux</code> package</li>
</ul></li>
<li><strong>The <code>useSelector</code> hook lets React components read data from the store</strong>
<ul>
<li>Selector functions take the entire store <code>state</code> as an argument, and return a value based on that state</li>
<li><code>useSelector</code> calls its selector function and returns the result from the selector</li>
<li><code>useSelector</code> subscribes to the store, and re-runs the selector each time an action is dispatched.</li>
<li>Whenever the selector result changes, <code>useSelector</code> forces the component to re-render with the new data</li>
</ul></li>
<li><strong>The <code>useDispatch</code> hook lets React components dispatch actions to the store</strong>
<ul>
<li><code>useDispatch</code> returns the actual <code>store.dispatch</code> function</li>
<li>You can call <code>dispatch(action)</code> as needed inside your components</li>
</ul></li>
<li><strong>The <code>&lt;Provider&gt;</code> component makes the store available to other React components</strong>
<ul>
<li>Render <code>&lt;Provider store={store}&gt;</code> around your entire <code>&lt;App&gt;</code></li>
</ul></li>
</ul>
<h2 id="whats-next"><span id="whats-next" class="anchor enhancedAnchor_2LWZ"></span>What’s Next?<a href="#whats-next" class="hash-link" title="Direct link to heading">#</a></h2>
<p>Now that our UI is working, it’s time to see how to make our Redux app talk to a server. In <a href="part-6-async-logic.html">Part 6: Async Logic</a>, we’ll talk about how asynchronous logic like timeouts and AJAX calls fit into the Redux data flow.</p>
<p><a href="part-4-store.html" class="pagination-nav__link"></a></p>
<p>« Redux Fundamentals, Part 4: Store</p>
<p><a href="part-6-async-logic.html" class="pagination-nav__link"></a></p>
<p>Next</p>
<p>Redux Fundamentals, Part 6: Async Logic and Data Fetching »</p>
<ul>
<li><a href="#introduction" class="table-of-contents__link">Introduction</a></li>
<li><a href="#integrating-redux-with-a-ui" class="table-of-contents__link">Integrating Redux with a UI</a>
<ul>
<li><a href="#basic-redux-and-ui-integration" class="table-of-contents__link">Basic Redux and UI Integration</a></li>
</ul></li>
<li><a href="#using-redux-with-react" class="table-of-contents__link">Using Redux with React</a>
<ul>
<li><a href="#designing-the-component-tree" class="table-of-contents__link">Designing the Component Tree</a></li>
<li><a href="#reading-state-from-the-store-with-useselector" class="table-of-contents__link">Reading State from the Store with &lt;code class="language-js &gt;useSelector</code></a></li>
<li><a href="#dispatching-actions-with-usedispatch" class="table-of-contents__link">Dispatching Actions with &lt;code class="language-js &gt;useDispatch</code></a></li>
<li><a href="#passing-the-store-with-provider" class="table-of-contents__link">Passing the Store with &lt;code class="language-js &gt;Provider</code></a></li>
</ul></li>
<li><a href="#react-redux-patterns" class="table-of-contents__link">React-Redux Patterns</a>
<ul>
<li><a href="#global-state-component-state-and-forms" class="table-of-contents__link">Global State, Component State, and Forms</a></li>
<li><a href="#using-multiple-selectors-in-a-component" class="table-of-contents__link">Using Multiple Selectors in a Component</a></li>
<li><a href="#selecting-data-in-list-items-by-id" class="table-of-contents__link">Selecting Data in List Items by ID</a></li>
</ul></li>
<li><a href="#what-youve-learned" class="table-of-contents__link">What You’ve Learned</a></li>
<li><a href="#whats-next" class="table-of-contents__link">What’s Next?</a></li>
</ul>
<h4 id="docs">Docs</h4>
<ul>
<li><a href="../official/introduction/getting-started.html" class="footer__link-item">Getting Started</a></li>
<li><a href="../essentials/part-1-overview-concepts.html" class="footer__link-item">Tutorial</a></li>
<li><a href="../official/faq.html" class="footer__link-item">FAQ</a></li>
<li><a href="../official/api/api-reference.html" class="footer__link-item">API Reference</a></li>
</ul>
<h4 id="community">Community</h4>
<ul>
<li><a href="../official/../discord.com/invite/0ZcbPKXt5bZ6au5t.html" class="footer__link-item">Reactiflux Discord</a></li>
<li><a href="../official/../stackoverflow.com/questions/tagged/redux.html" class="footer__link-item">Stack Overflow</a></li>
<li><a href="../official/introduction/getting-started.html#help-and-discussion" class="footer__link-item">Feedback</a></li>
</ul>
<h4 id="more">More</h4>
<ul>
<li><a href="../official/../github.com/reduxjs/redux.html" class="footer__link-item">GitHub</a></li>
<li><a href="../../../www.netlify.com/index.html"><img src="../../../www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify" /></a></li>
</ul>
<p><a href="../official/index.html" class="footerLogoLink_MyFc"><img src="../official/../d33wubrfki0l68.cloudfront.net/0834d0215db51e91525a25acf97433051f280f2f/c30f5/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo" /></p>
</body>
</html>
