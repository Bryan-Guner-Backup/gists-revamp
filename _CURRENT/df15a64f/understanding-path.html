<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>understanding-path</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h3 id="understanding-path">Understanding PATH</h3>
<p>When you run a command like <code>python</code> or <code>pip</code>, your operating system searches through a list of directories to find an executable file with that name. This list of directories lives in an environment variable called <code>PATH</code>, with each directory in the list separated by a colon:</p>
<pre><code>/usr/local/bin:/usr/bin:/bin
</code></pre>
<p>Directories in <code>PATH</code> are searched from left to right, so a matching executable in a directory at the beginning of the list takes precedence over another one at the end. In this example, the <code>/usr/local/bin</code> directory will be searched first, then <code>/usr/bin</code>, then <code>/bin</code>.</p>
<h3 id="understanding-shims">Understanding Shims</h3>
<p>pyenv works by inserting a directory of shims at the front of your <code>PATH</code>:</p>
<pre><code>$(pyenv root)/shims:/usr/local/bin:/usr/bin:/bin
</code></pre>
<p>Through a process called rehashing, pyenv maintains shims in that directory to match every Python command across every installed version of Python—<code>python</code>, <code>pip</code>, and so on.</p>
<p>Shims are lightweight executables that simply pass your command along to pyenv. So with pyenv installed, when you run, say, <code>pip</code>, your operating system will do the following:</p>
<ul>
<li>Search your <code>PATH</code> for an executable file named <code>pip</code></li>
<li>Find the pyenv shim named <code>pip</code> at the beginning of your <code>PATH</code></li>
<li>Run the shim named <code>pip</code>, which in turn passes the command along to pyenv</li>
</ul>
<h3 id="choosing-the-python-version">Choosing the Python Version</h3>
<p>When you execute a shim, pyenv determines which Python version to use by reading it from the following sources, in this order:</p>
<ol type="1">
<li><p>The <code>PYENV_VERSION</code> environment variable (if specified). You can use the <a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-shell" title="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-shell"><code>pyenv shell</code></a> command to set this environment variable in your current shell session.</p></li>
<li><p>The application-specific <code>.python-version</code> file in the current directory (if present). You can modify the current directory’s <code>.python-version</code> file with the <a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-local" title="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-local"><code>pyenv local</code></a> command.</p></li>
<li><p>The first <code>.python-version</code> file found (if any) by searching each parent directory, until reaching the root of your filesystem.</p></li>
<li><p>The global <code>$(pyenv root)/version</code> file. You can modify this file using the <a href="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-global" title="https://github.com/pyenv/pyenv/blob/master/COMMANDS.md#pyenv-global"><code>pyenv global</code></a> command. If the global version file is not present, pyenv assumes you want to use the “system” Python. (In other words, whatever version would run if pyenv weren’t in your <code>PATH</code>.)</p></li>
</ol>
<p><strong>NOTE:</strong> You can activate multiple versions at the same time, including multiple versions of Python2 or Python3 simultaneously. This allows for parallel usage of Python2 and Python3, and is required with tools like <code>tox</code>. For example, to set your path to first use your <code>system</code> Python and Python3 (set to 2.7.9 and 3.4.2 in this example), but also have Python 3.3.6, 3.2, and 2.5 available on your <code>PATH</code>, one would first <code>pyenv install</code> the missing versions, then set <code>pyenv global system 3.3.6 3.2 2.5</code>. At this point, one should be able to find the full executable path to each of these using <code>pyenv which</code>, e.g. <code>pyenv which python2.5</code> (should display <code>$(pyenv root)/versions/2.5/bin/python2.5</code>), or <code>pyenv which python3.4</code> (should display path to system Python3). You can also specify multiple versions in a <code>.python-version</code> file, separated by newlines. Lines starting with a <code>#</code> are ignored.</p>
<h3 id="locating-the-python-installation">Locating the Python Installation</h3>
<p>Once pyenv has determined which version of Python your application has specified, it passes the command along to the corresponding Python installation.</p>
<p>Each Python version is installed into its own directory under <code>$(pyenv root)/versions</code>.</p>
<p>For example, you might have these versions installed:</p>
<ul>
<li><code>$(pyenv root)/versions/2.7.8/</code></li>
<li><code>$(pyenv root)/versions/3.4.2/</code></li>
<li><code>$(pyenv root)/versions/pypy-2.4.0/</code></li>
</ul>
<p>As far as Pyenv is concerned, version names are simply directories under <code>$(pyenv root)/versions</code>.</p>
<h3 id="managing-virtual-environments">Managing Virtual Environments</h3>
<p>There is a pyenv plugin named <a href="https://github.com/pyenv/pyenv-virtualenv" title="https://github.com/pyenv/pyenv-virtualenv">pyenv-virtualenv</a> which comes with various features to help pyenv users to manage virtual environments created by virtualenv or Anaconda. Because the <code>activate</code> script of those virtual environments are relying on mutating <code>$PATH</code> variable of user’s interactive shell, it will intercept pyenv’s shim style command execution hooks. We’d recommend to install pyenv-virtualenv as well if you have some plan to play with those virtual environments.</p>
</body>
</html>
